$("a").click((async function(e){e.preventDefault();const loadList=["/monthPlan/","/blog/"],href=$(this).attr("href");console.log(href,loadList.includes(href)),href.startsWith("#")||(href.startsWith("/")&&!loadList.includes(href)?await pjax(href):loadList.includes(href)?location.href=href:open(href))})),window.addEventListener("popstate",async()=>{await pjax(void 0,!1)});const pjax=async(href=location.href,keepHistroy=!0)=>{$(".displayToggleBtn, .headerContainer, header .topMenu, p.logo > i.fas.fa-angle-down").removeClass("showing"),$("main").html('<div class="loader">Loading...</div>'),await $.ajax({url:href,type:"GET"}).done(data=>{$(data).each((function(){const tagname=this.nodeName.toLowerCase();if(window.document.baseURI=href,"script"===tagname){let isContained=!1;for(const e of $(document).find("script"))e.src===this.src&&e.innerHTML===this.innerHTML&&(isContained=!0);if("/blog/"===href&&this.src.includes("bundle.js"))fetch("/blog/bundle.js").then(r=>r.text()).then(t=>eval(t));else if(!isContained){const scr=document.createElement("script");scr.src=this.src?this.src:"",scr.innerHTML=this.innerHTML?this.innerHTML:"",document.head.appendChild(scr)}}else if("style"===tagname){const pjStyle=document.querySelector("style#pjAppend");pjStyle&&pjStyle.remove();const sty=document.createElement("style");sty.id="pjAppend",sty.innerHTML=this.innerHTML,document.head.appendChild(sty)}else if("link"===tagname){let isContained=!1;for(const e of $(document).find("link"))e.href===this.href&&e.rel===this.rel&&(isContained=!0);if(!isContained){const lin=document.createElement("link");lin.href=this.href,lin.rel=this.rel,document.head.appendChild(lin)}}else"main"===tagname?$("main").html(this.innerHTML):"title"===tagname&&(document.title=`${this.innerHTML} - 茨城県立古河中等教育学校ホームページ New`)}))}).fail(()=>{$("main").html("ページを読み込む際にエラーが発生しました。")}).always(()=>{keepHistroy&&history.pushState(void 0,0,href),window.scrollTo(0,0);const load_event=document.createEvent("Event");load_event.initEvent("load",!1,!1),window.dispatchEvent(load_event)}),await imgLoad(),headerMenuUpdate()};